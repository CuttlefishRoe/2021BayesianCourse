# 决策分析（Decision Analysis）

## 一、背景：

早在1738年，伯努利就已提出决策分析中的效用概念。从1763年贝叶斯发表条件概率起就出现统计推断理论的萌芽。1815年拉普拉斯又将它推向一个新的阶段。统计推断理论实际上是在风险情况下的决策理论。1931年，拉姆齐基于效用和主观概率两个基本概念来研究决策理论。1944年 J.von诺伊曼和O.莫根施特恩在著名的《竞赛理论与经济行为》一书中，独立地研究了在不确定情况下进行决策所用的近代效用理论。沃尔德在1950年提出的统计决策函数是决策理论的又一重要进展。1954年萨维奇为决策方法提供了公理系统和严格的哲学基础。60年代初期，美国哈佛商学院开始运用统计决策理论解决商业问题，并定名为应用统计决策理论。1966年，美国霍华德首先应用决策分析这个名词。后来，决策分析又有许多新的发展，并广泛吸取有关的决策方法，从而形成一个内容广泛、实用性很强的学科分支。现代决策分析的发展动向是研究人们决策的行为思想方面和研制与计算机结合的决策支持系统等。

## 二、定义及基本方法：

### 2.1. 决策分析的定义

决策分析一般指从若干可能的方案中通过决策分析技术，如期望值法或决策树法等，选择其一的决策过程的定量分析方法。决策分析本质上比统计推断更复杂，因为它设计对决策的优化以及对不确定性的平均。

巴伐利亚决策分析的数学定义如下：
1.	列举所有可能的决定和结果。
2.	确定每个决策选项d的x的概率分布。用贝叶斯术语来说，这是条件后验分布，p(x|d)。在决策分析框架中，决策d不具有概率分布。所以我们不能说p(d)或p(x)；所有的概率都必须以d为条件。
3.	定义一个效用函数U(x)，将结果映射到实数上。在简单的问题中，效用可能与单个连续的收益x相一致，例如寿命或净利润。如果结果x有多个属性，效用函数必须权衡不同的goods。
4.	计算期望效用E(U(x)|d)作为决策d的函数，并选择期望效用最高的决策。在决策树中，可能会有两个或更多的决策，期望效用必须在每个决策点计算，条件是在该点之前的所有可用信息。

一个完整的决策分析包括所有这四个步骤。

### 2.2. 决策分析在不同情况下的方法
1.	确定性情况：每一个方案引起一个、而且只有一个结局。当方案个数较少时可以用穷举法，当方案个数较多时可以用一般最优化方法。
2.	随机性情况：也称风险性情况，即由一个方案可能引起几个结局中的一个，但各种结局以一定的概率发生。通常在能用某种估算概率的方法时，就可使用随机性决策，例如决策树的方法。
3.	不确定性情况:一个方案可能引起几个结局中的某一个结局,但各种结局的发生概率未知。这时可使用不确定型决策，例如拉普拉斯准则、乐观准则、悲观准则、遗憾准则等来取舍方案。
4.	多目标情况：由一个方案同时引起多个结局，它们分别属于不同属性或所追求的不同目标。这时一般采用多目标决策方法。例如化多为少的方法、分层序列法、直接找所有非劣解的方法等。
5.	多人决策情况：在同一个方案内有多个决策者，他们的利益不同，对方案结局的评价也不同。这时采用对策论、冲突分析、群决策等方法。

除上述各种方法外，还有对结局评价等有模糊性时采用的模糊决策方法和决策分析阶段序贯进行时所采用的序贯决策方法等。

## 三、两种决策分析方法

### 3.1. 决策树

决策树是在已知各种情况发生概率的基础上，通过构成决策树来求取净现值的期望值大于等于零的概率，评价项目风险，判断其可行性的决策分析方法，是直观运用概率分析的一种图解法，决策树法有利于决策人员使决策问题形象比，可把各种可以更换的方案、可能出现的状态、可能性大小及产生的后果等，简单地绘制在一张图上，以便计算、研究与分析，同时还可以随时补充和不确定型情况下的决策分析。构建决策树的过程中常用的指标是信息增益，还有Gini值和信息增益比。

#### 3.1.1. 计算信息增益

计算信息增益首先需要计算总体的经验熵和条件经验熵，计算公式如下：$$ -\sum_{k=1}^K{\frac{|C_k|}{|D|}\log2\frac{|C_k|}{|D|}} $$
